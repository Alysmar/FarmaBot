<!DOCTYPE html>
<html lang="en">
  <head>
    <script>
      function checkSession() {
        fetch("/api/check_session")
          .then((response) => {
            if (!response.ok) {
              throw new Error("Ingresa tus datos para iniciar sesión");
            }
            return response.json();
          })
          .then((data) => {
            console.log(data);
            window.location.href = "farmabot"; // ruta de farmabot
          })
          .catch((error) => {
            // Redirigir solo si la URL actual no es la raíz ('/')
            if (window.location.pathname !== "/") {
              //alert(error.message);
              window.location.href = "/";
            }
          });
      }

      window.onload = checkSession;
    </script>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Login y Registro - FarmaBot</title>

    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;
    0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
      rel="stylesheet"
    />

    <link rel="stylesheet" href="assets/css/estilos.css" />
    <link
      rel="shortcut icon"
      type="image/x-icon"
      href="/assets/images/bot2.png"
    />
  </head>
  <body>
    <main>
      <div class="contenedor__todo">
        <div class="caja__trasera">
          <div class="caja__trasera-login">
            <h3>¿Ya tienes una cuenta?</h3>
            <p>Inicia sesión para entrar</p>
            <button id="btn__iniciar-sesion">Iniciar Sesión</button>
          </div>
          <div class="caja__trasera-register">
            <h3>¿Aún no tienes una cuenta?</h3>
            <p>Regístrate para que puedas iniciar sesión</p>
            <button id="btn__registrarse">Registrarse</button>
          </div>
        </div>
        <!--Formulario de login y registro-->
        <div class="contenedor__login-register">
          <!--LOGIN-->
          <form id="loginForm" class="formulario__login">
            <h2>Iniciar Sesión</h2>
            <input
              type="text"
              placeholder="Correo Electrónico"
              name="correo"
              id="correo_login"
            />
            <input
              type="password"
              placeholder="Contraseña"
              name="contrasena"
              id="contrasena_login"
            />
            <button type="button" onclick="iniciarSesion()">Entrar</button>
          </form>
          <!--REGISTRO-->
          <form id="registroForm" class="formulario__register">
            <h2>Registrarse</h2>
            <input
              type="text"
              placeholder="Nombre Completo"
              name="nombre_completo"
              id="nombre_completo"
            />
            <input
              type="text"
              placeholder="Correo Electrónico"
              name="correo"
              id="correo_registro"
            />
            <input
              type="text"
              placeholder="Usuario"
              name="usuario"
              id="usuario"
            />
            <input
              type="password"
              placeholder="Contraseña"
              name="contrasena"
              id="contrasena_registro"
            />
            <button type="button" onclick="registrarUsuario()">
              Registrarse
            </button>
          </form>
        </div>
      </div>
    </main>
    <script src="assets/js/script.js"></script>
  </body>
</html>
